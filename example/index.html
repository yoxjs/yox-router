<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>yox-router</title>
</head>
<body>
    <div id="app"></div>
    <script src="./yox.js"></script>
    <script src="../dist/yox-router.js"></script>
    <script>
        Yox.use(YoxRouter)

        const Index = {
          template: `
            <div>
              <h2>index</h2>
              <span>{{userId}}</span>
              <router-view />
            </div>
          `,
          beforeMount() {
            console.log('index', 'beforeMount')
          },
          afterMount() {
            console.log('index', 'afterMount')
          },
          beforeUpdate() {
            console.log('index', 'beforeUpdate')
          },
          afterUpdate() {
            console.log('index', 'afterUpdate')
          },
          beforeDestroy() {
            console.log('index', 'beforeDestroy')
          },
          afterDestroy() {
            console.log('index', 'afterDestroy')
          },

          beforeRouteEnter(to, from, next) {
            console.log('index', 'beforeRouteEnter')
            next()
          },
          afterRouteEnter() {
            console.log('index', 'afterRouteEnter')
          },
          beforeRouteUpdate(to, from, next) {
            console.log('index', 'beforeRouteUpdate')
            next()
          },
          afterRouteUpdate() {
            console.log('index', 'afterRouteUpdate')
          },
          beforeRouteLeave(to, from, next) {
            console.log('index', 'beforeRouteLeave')
            next()
          },
          afterRouteLeave() {
            console.log('index', 'afterRouteLeave')
          },
        }

        const User = {
          propTypes: {
            userId: {
              type: ['string', 'number'],
              value: 'default value'
            },
            visible: {
              type: 'boolean'
            }
          },
          template: `
            <div>
              <h2>user</h2>
              <span>{{userId}}</span>
              {{#if visible}}
                <router-view />
              {{/if}}
            </div>
          `,
          beforeMount() {
            console.log('user', 'beforeMount')
          },
          afterMount() {
            console.log('user', 'afterMount')
          },
          beforeUpdate() {
            console.log('user', 'beforeUpdate')
          },
          afterUpdate() {
            console.log('user', 'afterUpdate')
          },
          beforeDestroy() {
            console.log('user', 'beforeDestroy')
          },
          afterDestroy() {
            console.log('user', 'afterDestroy')
          },

          beforeRouteEnter(to, from, next) {
            console.log('user', 'beforeRouteEnter')
            next()
          },
          afterRouteEnter() {
            console.log('user', 'afterRouteEnter')
          },
          beforeRouteUpdate(to, from, next) {
            console.log('user', 'beforeRouteUpdate')
            next()
          },
          afterRouteUpdate() {
            console.log('user', 'afterRouteUpdate')
          },
          beforeRouteLeave(to, from, next) {
            console.log('user', 'beforeRouteLeave')
            next()
          },
          afterRouteLeave() {
            console.log('user', 'afterRouteLeave')
          },
        }

        const UserIndex = {
          propTypes: {
            userId: {
              type: ['string', 'number']
            }
          },
          template: `
            <div>
              <h3>user index</h3>
              <span>{{userId}}</span>
              <router-view />
            </div>
          `,
          beforeMount() {
            console.log('userIndex', 'beforeMount')
          },
          afterMount() {
            console.log('userIndex', 'afterMount')
          },
          beforeUpdate() {
            console.log('userIndex', 'beforeUpdate')
          },
          afterUpdate() {
            console.log('userIndex', 'afterUpdate')
          },
          beforeDestroy() {
            console.log('userIndex', 'beforeDestroy')
          },
          afterDestroy() {
            console.log('userIndex', 'afterDestroy')
          },

          beforeRouteEnter(to, from, next) {
            console.log('userIndex', 'beforeRouteEnter')
            next()
          },
          afterRouteEnter() {
            console.log('userIndex', 'afterRouteEnter')
          },
          beforeRouteUpdate(to, from, next) {
            console.log('userIndex', 'beforeRouteUpdate')
            next()
          },
          afterRouteUpdate() {
            console.log('userIndex', 'afterRouteUpdate')
          },
          beforeRouteLeave(to, from, next) {
            console.log('userIndex', 'beforeRouteLeave')
            next()
          },
          afterRouteLeave() {
            console.log('userIndex', 'afterRouteLeave')
          },
        }

        const UserDetail = {
          propTypes: {
            userId: {
              type: ['string', 'number']
            }
          },
          template: `
            <div>
              <h4>user detail</h4>
              <span>{{userId}}</span>
            </div>
          `,
          beforeMount() {
            console.log('userDetail', 'beforeMount')
          },
          afterMount() {
            console.log('userDetail', 'afterMount')
          },
          beforeUpdate() {
            console.log('userDetail', 'beforeUpdate')
          },
          afterUpdate() {
            console.log('userDetail', 'afterUpdate')
          },
          beforeDestroy() {
            console.log('userDetail', 'beforeDestroy')
          },
          afterDestroy() {
            console.log('userDetail', 'afterDestroy')
          },

          beforeRouteEnter(to, from, next) {
            console.log('userDetail', 'beforeRouteEnter')
            next()
          },
          afterRouteEnter() {
            console.log('userDetail', 'afterRouteEnter')
          },
          beforeRouteUpdate(to, from, next) {
            console.log('userDetail', 'beforeRouteUpdate')
            next()
          },
          afterRouteUpdate() {
            console.log('userDetail', 'afterRouteUpdate')
          },
          beforeRouteLeave(to, from, next) {
            console.log('userDetail', 'beforeRouteLeave')
            next()
          },
          afterRouteLeave() {
            console.log('userDetail', 'afterRouteLeave')
          },
        }

        const UserProfile = {
          propTypes: {
            userId: {
              type: ['string', 'number']
            }
          },
          template: `
            <div>
              <h4>user profile</h4>
              <span>{{userId}}</span>
            </div>
          `,
          beforeMount() {
            console.log('userProfile', 'beforeMount')
          },
          afterMount() {
            console.log('userProfile', 'afterMount')
          },
          beforeUpdate() {
            console.log('userProfile', 'beforeUpdate')
          },
          afterUpdate() {
            console.log('userProfile', 'afterUpdate')
          },
          beforeDestroy() {
            console.log('userProfile', 'beforeDestroy')
          },
          afterDestroy() {
            console.log('userProfile', 'afterDestroy')
          },

          beforeRouteEnter(to, from, next) {
            console.log('userProfile', 'beforeRouteEnter')
            next()
          },
          afterRouteEnter() {
            console.log('userProfile', 'afterRouteEnter')
          },
          beforeRouteUpdate(to, from, next) {
            console.log('userProfile', 'beforeRouteUpdate')
            next()
          },
          afterRouteUpdate() {
            console.log('userProfile', 'afterRouteUpdate')
          },
          beforeRouteLeave(to, from, next) {
            console.log('userProfile', 'beforeRouteLeave')
            next()
          },
          afterRouteLeave() {
            console.log('userProfile', 'afterRouteLeave')
          },
        }

        const Setting = {
          template: `
            <div>
              <h1>setting</h1>
              {{stringify(this)}}
            </div>
          `,
          beforeMount() {
            console.log('setting', 'beforeMount')
          },
          afterMount() {
            console.log('setting', 'afterMount')
          },
          beforeUpdate() {
            console.log('setting', 'beforeUpdate')
          },
          afterUpdate() {
            console.log('setting', 'afterUpdate')
          },
          beforeDestroy() {
            console.log('setting', 'beforeDestroy')
          },
          afterDestroy() {
            console.log('setting', 'afterDestroy')
          },

          beforeRouteEnter(to, from, next) {
            console.log('setting', 'beforeRouteEnter')
            next()
          },
          afterRouteEnter() {
            console.log('setting', 'afterRouteEnter')
          },
          beforeRouteUpdate(to, from, next) {
            console.log('setting', 'beforeRouteUpdate')
            next()
          },
          afterRouteUpdate() {
            console.log('setting', 'afterRouteUpdate')
          },
          beforeRouteLeave(to, from, next) {
            console.log('setting', 'beforeRouteLeave')
            next()
          },
          afterRouteLeave() {
            console.log('setting', 'afterRouteLeave')
          },
        }

        var router = new YoxRouter.Router({
          el: Yox.dom.find('#app'),
          routes: [
            {
              path: '',
              component: Index,
              children: [
                {
                  path: '',
                  component: Index
                },
                {
                  path: 'user',
                  component: User,
                  children: [
                    {
                      path: '',
                      component: UserIndex
                    },
                    {
                      path: 'detail/:userId',
                      component: UserDetail
                    },
                    {
                      path: 'profile/:userId',
                      component: UserProfile
                    },
                  ]
                },
                {
                  path: 'setting/',
                  component: Index,
                },
                {
                  path: 'project',
                  component: Index,
                },
              ]
            }
          ],
          route404: {
            path: '404',
            component: Index,
          }
        })
        router.beforeEnter = function (to, from, next) {
          console.log('router beforeEnter', to, from)
          next()
        }
        router.afterEnter = function (to, from) {
          console.log('router afterEnter', to, from)
        }
        router.beforeUpdate = function (to, from, next) {
          console.log('router beforeUpdate', to, from)
          next()
        }
        router.afterUpdate = function (to, from) {
          console.log('router afterUpdate', to, from)
        }
        router.beforeLeave = function (to, from, next) {
          console.log('router beforeLeave', to, from)
          next()
        }
        router.afterLeave = function (to, from) {
          console.log('router afterLeave', to, from)
        }

        router.start()

    </script>
</body>
</html>
