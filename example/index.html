<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>touch</title>
</head>
<body>
    <div id="app"></div>
    <script src="./yox.js"></script>
    <script src="../dist/yox-router.js"></script>
    <script>
        Yox.use(YoxRouter)

        YoxRouter.register({
          index: {
            template: `
              <div>
                <h2>index</h2>
                <span>{{userId}}</span>
                <router-view />
              </div>
            `,
            beforeMount() {
              console.log('index', 'beforeMount')
            },
            afterMount() {
              console.log('index', 'afterMount')
            },
            beforeUpdate() {
              console.log('index', 'beforeUpdate')
            },
            afterUpdate() {
              console.log('index', 'afterUpdate')
            },
            beforeDestroy() {
              console.log('index', 'beforeDestroy')
            },
            afterDestroy() {
              console.log('index', 'afterDestroy')
            }
          },
          user: {
            propTypes: {
              userId: {
                type: ['string', 'number']
              },
              visible: {
                type: 'boolean'
              }
            },
            template: `
              <div>
                <h2>user</h2>
                <span>{{userId}}</span>
                {{#if visible}}
                  <router-view />
                {{/if}}
              </div>
            `,
            beforeMount() {
              console.log('user', 'beforeMount')
            },
            afterMount() {
              console.log('user', 'afterMount')
            },
            beforeUpdate() {
              console.log('user', 'beforeUpdate')
            },
            afterUpdate() {
              console.log('user', 'afterUpdate')
            },
            beforeDestroy() {
              console.log('user', 'beforeDestroy')
            },
            afterDestroy() {
              console.log('user', 'afterDestroy')
            }
          },
          userIndex: {
            propTypes: {
              userId: {
                type: ['string', 'number']
              }
            },
            template: `
              <div>
                <h3>user index</h3>
                <span>{{userId}}</span>
                <router-view />
              </div>
            `,
            beforeMount() {
              console.log('userIndex', 'beforeMount')
            },
            afterMount() {
              console.log('userIndex', 'afterMount')
            },
            beforeUpdate() {
              console.log('userIndex', 'beforeUpdate')
            },
            afterUpdate() {
              console.log('userIndex', 'afterUpdate')
            },
            beforeDestroy() {
              console.log('userIndex', 'beforeDestroy')
            },
            afterDestroy() {
              console.log('userIndex', 'afterDestroy')
            }
          },
          userDetail: {
            propTypes: {
              userId: {
                type: ['string', 'number']
              }
            },
            template: `
              <div>
                <h4>user detail</h4>
                <span>{{userId}}</span>
              </div>
            `,
            beforeMount() {
              console.log('userDetail', 'beforeMount')
            },
            afterMount() {
              console.log('userDetail', 'afterMount')
            },
            beforeUpdate() {
              console.log('userDetail', 'beforeUpdate')
            },
            afterUpdate() {
              console.log('userDetail', 'afterUpdate')
            },
            beforeDestroy() {
              console.log('userDetail', 'beforeDestroy')
            },
            afterDestroy() {
              console.log('userDetail', 'afterDestroy')
            }
          },
          userProfile: {
            propTypes: {
              userId: {
                type: ['string', 'number']
              }
            },
            template: `
              <div>
                <h4>user profile</h4>
                <span>{{userId}}</span>
              </div>
            `,
            beforeMount() {
              console.log('userProfile', 'beforeMount')
            },
            afterMount() {
              console.log('userProfile', 'afterMount')
            },
            beforeUpdate() {
              console.log('userProfile', 'beforeUpdate')
            },
            afterUpdate() {
              console.log('userProfile', 'afterUpdate')
            },
            beforeDestroy() {
              console.log('userProfile', 'beforeDestroy')
            },
            afterDestroy() {
              console.log('userProfile', 'afterDestroy')
            }
          },
          setting: {
            template: `
              <div>
                <h1>setting</h1>
                {{stringify(this)}}
              </div>
            `,
            beforeMount() {
              console.log('setting', 'beforeMount')
            },
            afterMount() {
              console.log('setting', 'afterMount')
            },
            beforeUpdate() {
              console.log('setting', 'beforeUpdate')
            },
            afterUpdate() {
              console.log('setting', 'afterUpdate')
            },
            beforeDestroy() {
              console.log('setting', 'beforeDestroy')
            },
            afterDestroy() {
              console.log('setting', 'afterDestroy')
            }
          }
        })

        var router = new YoxRouter.Router({
          el: Yox.dom.find('#app'),
          routes: [
            {
              path: '',
              component: 'index',
              children: [
                {
                  path: '',
                  component: 'index'
                },
                {
                  path: 'user',
                  component: 'user',
                  children: [
                    {
                      path: '',
                      component: 'userIndex'
                    },
                    {
                      path: 'detail/:userId',
                      component: 'userDetail'
                    },
                    {
                      path: 'profile/:userId',
                      component: 'userProfile'
                    },
                  ]
                },
                {
                  path: 'setting/',
                  component: 'index',
                },
                {
                  path: 'project',
                  component: 'index',
                },
              ]
            }
          ],
          route404: {
            path: '404',
            component: 'index',
          }
        })
        router.beforeEnter = function (to, from, next) {
          console.log('router beforeEnter', to, from)
          next()
        }
        router.afterEnter = function (to, from, next) {
          console.log('router afterEnter', to, from)
          next()
        }
        router.beforeLeave = function (to, from, next) {
          console.log('router beforeLeave', to, from)
          next()
        }
        router.afterLeave = function (to, from, next) {
          console.log('router afterLeave', to, from)
          next()
        }

        router.start()

    </script>
</body>
</html>
